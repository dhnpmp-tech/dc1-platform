openapi: 3.0.3
info:
  title: DC1 Mission Control API
  description: DC1 decentralized GPU marketplace — Mission Control orchestration API
  version: 1.0.0
  contact:
    name: DC1 Team
servers:
  - url: http://76.13.179.86:8084/api
    description: Gate 0 Mission Control

security:
  - BearerAuth: []

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer

  schemas:
    # ── Enums ──
    AgentStatus:
      type: string
      enum: [idle, working, blocked, offline, error]

    TaskStatus:
      type: string
      enum: [backlog, in-progress, code-review, blocked, done]

    TaskPriority:
      type: string
      enum: [critical, high, medium, low]

    ConnectionType:
      type: string
      enum: [api, database, gpu, service]

    ConnectionStatus:
      type: string
      enum: [online, offline, idle, degraded, error]

    JobStatus:
      type: string
      enum: [pending, matching, matched, executing, checkpointing, completed, failed, cancelled]

    GpuHealthStatus:
      type: string
      enum: [healthy, degraded, unhealthy, offline, unknown]

    MilestoneStatus:
      type: string
      enum: [pending, in-progress, completed, missed]

    SecurityEventType:
      type: string
      enum: [login, access_denied, rate_limit, isolation_breach, audit, config_change]

    ModelName:
      type: string
      enum: [claude-haiku, claude-sonnet, claude-opus, minimax-m2.5, gpt-4o]

    # ── Core Resources ──
    Agent:
      type: object
      properties:
        id: { type: string, format: uuid }
        name: { type: string }
        role: { type: string }
        tech_stack: { type: string }
        status: { $ref: '#/components/schemas/AgentStatus' }
        current_task_id: { type: string, format: uuid, nullable: true }
        next_task_id: { type: string, format: uuid, nullable: true }
        blocker_description: { type: string, nullable: true }
        last_checkin: { type: string, format: date-time, nullable: true }
        model_preference: { $ref: '#/components/schemas/ModelName' }
        daily_token_budget: { type: integer }
        tokens_used_today: { type: integer }
        total_learnings: { type: integer, nullable: true }
        total_ideas: { type: integer, nullable: true }
        quality_score: { type: string }
        created_at: { type: string, format: date-time }
        current_task: { type: string, nullable: true }
        message: { type: string, nullable: true }
        current_task_title: { type: string, nullable: true }
        active_tasks: { type: string }
        last_heartbeat: { type: string, format: date-time, nullable: true }

    AgentDetail:
      allOf:
        - $ref: '#/components/schemas/Agent'
        - type: object
          properties:
            task_history:
              type: array
              items: { $ref: '#/components/schemas/Task' }
            token_usage:
              type: array
              items: { $ref: '#/components/schemas/TokenUsage' }

    Task:
      type: object
      properties:
        id: { type: string, format: uuid }
        title: { type: string }
        description: { type: string }
        assigned_to_agent_id: { type: string, format: uuid, nullable: true }
        status: { $ref: '#/components/schemas/TaskStatus' }
        priority: { $ref: '#/components/schemas/TaskPriority' }
        deadline: { type: string, format: date-time, nullable: true }
        depends_on_task_id: { type: string, format: uuid, nullable: true }
        estimated_tokens: { type: integer, nullable: true }
        model_preference: { type: string, nullable: true }
        progress_percent: { type: integer, minimum: 0, maximum: 100 }
        notes: { type: string, nullable: true }
        created_at: { type: string, format: date-time }
        completed_at: { type: string, format: date-time, nullable: true }
        assigned_to_name: { type: string, nullable: true }
        depends_on_title: { type: string, nullable: true }

    Heartbeat:
      type: object
      properties:
        id: { type: string, format: uuid }
        agent_id: { type: string, format: uuid }
        status: { $ref: '#/components/schemas/AgentStatus' }
        message: { type: string, nullable: true }
        tokens_used: { type: integer, nullable: true }
        model_used: { type: string, nullable: true }
        blockers: { type: string, nullable: true }
        created_at: { type: string, format: date-time }

    TokenUsage:
      type: object
      properties:
        id: { type: string, format: uuid }
        agent_id: { type: string, format: uuid }
        task_id: { type: string, format: uuid, nullable: true }
        model: { type: string }
        tokens_in: { type: integer }
        tokens_out: { type: integer }
        cost_usd: { type: number, format: double }
        created_at: { type: string, format: date-time }

    AgentIntelligence:
      type: object
      properties:
        agent: { $ref: '#/components/schemas/Agent' }
        current_task: { $ref: '#/components/schemas/Task' }
        task_history:
          type: array
          items: { $ref: '#/components/schemas/Task' }
        learnings:
          type: array
          items:
            type: object
            properties:
              id: { type: string, format: uuid }
              agent_id: { type: string, format: uuid }
              learning: { type: string }
              category: { type: string, nullable: true }
              created_at: { type: string, format: date-time }
        ideas:
          type: array
          items:
            type: object
            properties:
              id: { type: string, format: uuid }
              agent_id: { type: string, format: uuid }
              idea: { type: string }
              status: { type: string }
              created_at: { type: string, format: date-time }
        feedback:
          type: array
          items:
            type: object
            properties:
              id: { type: string, format: uuid }
              agent_id: { type: string, format: uuid }
              from_agent_id: { type: string, format: uuid, nullable: true }
              feedback: { type: string }
              rating: { type: integer, nullable: true }
              created_at: { type: string, format: date-time }
        performance_metrics:
          type: object
          properties:
            tasks_completed: { type: integer }
            average_quality: { type: number }
            total_tokens_used: { type: integer }
            uptime_percent: { type: number }

    Job:
      type: object
      properties:
        id: { type: string, format: uuid }
        renter_id: { type: string, format: uuid }
        gpu_type: { type: string }
        job_code_url: { type: string }
        estimated_hours: { type: number }
        max_budget: { type: number }
        status: { $ref: '#/components/schemas/JobStatus' }
        provider_id: { type: string, format: uuid, nullable: true }
        gpu_id: { type: string, format: uuid, nullable: true }
        docker_image: { type: string, nullable: true }
        entrypoint: { type: string, nullable: true }
        utilization: { type: number, nullable: true }
        temperature: { type: number, nullable: true }
        cost_so_far: { type: number, nullable: true }
        progress_percent: { type: integer, nullable: true }
        started_at: { type: string, format: date-time, nullable: true }
        completed_at: { type: string, format: date-time, nullable: true }
        created_at: { type: string, format: date-time }

    GpuHealth:
      type: object
      properties:
        id: { type: string, format: uuid }
        gpu_id: { type: string, format: uuid }
        status: { $ref: '#/components/schemas/GpuHealthStatus' }
        temperature: { type: number, nullable: true }
        utilization: { type: number, nullable: true }
        memory_used_mb: { type: integer, nullable: true }
        memory_total_mb: { type: integer, nullable: true }
        power_watts: { type: number, nullable: true }
        checked_at: { type: string, format: date-time }

    ConnectionHistoryEntry:
      type: object
      properties:
        id: { type: string, format: uuid }
        connection_id: { type: string, format: uuid }
        status: { $ref: '#/components/schemas/ConnectionStatus' }
        latency_ms: { type: number, nullable: true }
        error_message: { type: string, nullable: true }
        checked_at: { type: string, format: date-time }

    Connection:
      type: object
      properties:
        id: { type: string, format: uuid }
        connection_name: { type: string }
        connection_type: { $ref: '#/components/schemas/ConnectionType' }
        status: { $ref: '#/components/schemas/ConnectionStatus' }
        last_check: { type: string, format: date-time, nullable: true }
        latency_ms: { type: number, nullable: true }
        error_message: { type: string, nullable: true }
        uptime_percent: { type: string }

    SecurityAudit:
      type: object
      properties:
        id: { type: string, format: uuid }
        event_type: { $ref: '#/components/schemas/SecurityEventType' }
        agent_id: { type: string, format: uuid, nullable: true }
        resource: { type: string }
        action: { type: string }
        details: { type: object, nullable: true }
        ip_address: { type: string, nullable: true }
        severity: { type: string, enum: [low, medium, high, critical] }
        created_at: { type: string, format: date-time }

    SecurityViolation:
      type: object
      properties:
        id: { type: string, format: uuid }
        violation_type: { type: string }
        job_id: { type: string, format: uuid, nullable: true }
        gpu_id: { type: string, format: uuid, nullable: true }
        description: { type: string }
        severity: { type: string, enum: [low, medium, high, critical] }
        resolved: { type: boolean }
        created_at: { type: string, format: date-time }

    IsolationResult:
      type: object
      properties:
        job_id: { type: string, format: uuid }
        checks:
          type: array
          items:
            type: object
            properties:
              name: { type: string }
              passed: { type: boolean }
              details: { type: string }
        overall_pass: { type: boolean }
        checked_at: { type: string, format: date-time }

    Provider:
      type: object
      properties:
        id: { type: string, format: uuid }
        name: { type: string }
        location: { type: string, nullable: true }
        status: { type: string, enum: [active, inactive, suspended] }
        total_gpus: { type: integer }
        available_gpus: { type: integer }
        rating: { type: number, nullable: true }
        created_at: { type: string, format: date-time }

    Gpu:
      type: object
      properties:
        id: { type: string, format: uuid }
        provider_id: { type: string, format: uuid }
        model: { type: string }
        vram_gb: { type: integer }
        status: { type: string, enum: [available, in-use, maintenance, offline] }
        hourly_rate: { type: number }
        reliability_score: { type: number, nullable: true }
        created_at: { type: string, format: date-time }

    Milestone:
      type: object
      properties:
        id: { type: string, format: uuid }
        name: { type: string }
        description: { type: string, nullable: true }
        target_date: { type: string, format: date-time }
        status: { $ref: '#/components/schemas/MilestoneStatus' }
        created_at: { type: string, format: date-time }

    DashboardStats:
      type: object
      properties:
        agents:
          type: array
          items:
            type: object
            properties:
              id: { type: string, format: uuid }
              name: { type: string }
              role: { type: string }
              status: { $ref: '#/components/schemas/AgentStatus' }
              last_checkin: { type: string, format: date-time, nullable: true }
              tokens_used_today: { type: integer }
              daily_token_budget: { type: integer }
        tasks:
          type: object
          properties:
            backlog: { type: integer }
            in-progress: { type: integer }
            code-review: { type: integer }
            blocked: { type: integer }
            done: { type: integer }
            total: { type: integer }
        active_blockers: { type: integer }
        recent_errors: { type: integer }
        milestones:
          type: array
          items: { $ref: '#/components/schemas/Milestone' }
        connections:
          type: array
          items: { $ref: '#/components/schemas/Connection' }
        timestamp: { type: string, format: date-time }

    Error:
      type: object
      properties:
        error: { type: string }
        message: { type: string }
        statusCode: { type: integer }

paths:
  # ── Agent Management ──
  /agents:
    post:
      summary: Register a new agent
      tags: [Agents]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [name, role]
              properties:
                name: { type: string }
                role: { type: string }
                tech_stack: { type: string }
                model_preference: { $ref: '#/components/schemas/ModelName' }
                daily_token_budget: { type: integer }
      responses:
        '201':
          description: Agent created
          content:
            application/json:
              schema: { $ref: '#/components/schemas/Agent' }
        '400':
          description: Validation error
          content:
            application/json:
              schema: { $ref: '#/components/schemas/Error' }

    get:
      summary: List all agents
      tags: [Agents]
      responses:
        '200':
          description: Array of agents
          content:
            application/json:
              schema:
                type: array
                items: { $ref: '#/components/schemas/Agent' }

  /agents/{id}:
    parameters:
      - name: id
        in: path
        required: true
        description: Agent UUID or name
        schema: { type: string }

    get:
      summary: Get agent detail with task history and token usage
      tags: [Agents]
      responses:
        '200':
          content:
            application/json:
              schema: { $ref: '#/components/schemas/AgentDetail' }
        '404':
          content:
            application/json:
              schema: { $ref: '#/components/schemas/Error' }

    patch:
      summary: Update agent (status, current_task, message)
      tags: [Agents]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                status: { $ref: '#/components/schemas/AgentStatus' }
                current_task: { type: string }
                message: { type: string }
                current_task_id: { type: string, format: uuid }
      responses:
        '200':
          content:
            application/json:
              schema: { $ref: '#/components/schemas/Agent' }

  /agents/{id}/status:
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string }
    put:
      summary: Update agent status only
      tags: [Agents]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [status]
              properties:
                status: { $ref: '#/components/schemas/AgentStatus' }
      responses:
        '200':
          content:
            application/json:
              schema: { $ref: '#/components/schemas/Agent' }

  /agents/{id}/blocker:
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string }
    delete:
      summary: Clear agent blocker
      tags: [Agents]
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  message: { type: string }

  # ── Heartbeats ──
  /heartbeats:
    post:
      summary: Agent check-in heartbeat
      tags: [Heartbeats]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [agent_id, status]
              properties:
                agent_id: { type: string, description: UUID or agent name }
                status: { $ref: '#/components/schemas/AgentStatus' }
                message: { type: string }
                tokens_used: { type: integer }
                model_used: { type: string }
                blockers: { type: string }
      responses:
        '201':
          content:
            application/json:
              schema: { $ref: '#/components/schemas/Heartbeat' }

  /heartbeats/{agent_id}:
    parameters:
      - name: agent_id
        in: path
        required: true
        schema: { type: string }
    get:
      summary: Get heartbeat history (last 30 days)
      tags: [Heartbeats]
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items: { $ref: '#/components/schemas/Heartbeat' }

  # ── Tasks ──
  /tasks:
    post:
      summary: Create a task
      tags: [Tasks]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [title]
              properties:
                title: { type: string }
                description: { type: string }
                assigned_to_agent_id: { type: string, format: uuid }
                status: { $ref: '#/components/schemas/TaskStatus' }
                priority: { $ref: '#/components/schemas/TaskPriority' }
                deadline: { type: string, format: date-time }
                depends_on_task_id: { type: string, format: uuid }
                estimated_tokens: { type: integer }
                model_preference: { type: string }
      responses:
        '201':
          content:
            application/json:
              schema: { $ref: '#/components/schemas/Task' }

    get:
      summary: List tasks with optional filters
      tags: [Tasks]
      parameters:
        - name: status
          in: query
          schema: { $ref: '#/components/schemas/TaskStatus' }
        - name: assigned_to
          in: query
          schema: { type: string }
        - name: priority
          in: query
          schema: { $ref: '#/components/schemas/TaskPriority' }
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items: { $ref: '#/components/schemas/Task' }

  /tasks/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string, format: uuid }
    put:
      summary: Update task
      tags: [Tasks]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                status: { $ref: '#/components/schemas/TaskStatus' }
                progress_percent: { type: integer, minimum: 0, maximum: 100 }
                notes: { type: string }
                title: { type: string }
                description: { type: string }
                priority: { $ref: '#/components/schemas/TaskPriority' }
                assigned_to_agent_id: { type: string, format: uuid }
      responses:
        '200':
          content:
            application/json:
              schema: { $ref: '#/components/schemas/Task' }

  /tasks/{id}/complete:
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string, format: uuid }
    put:
      summary: Mark task as done
      tags: [Tasks]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                notes: { type: string }
                actual_tokens_used: { type: integer }
                time_spent_hours: { type: number }
      responses:
        '200':
          content:
            application/json:
              schema: { $ref: '#/components/schemas/Task' }

  /tasks/{id}/history:
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string, format: uuid }
    get:
      summary: Get task audit trail
      tags: [Tasks]
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id: { type: string, format: uuid }
                    task_id: { type: string, format: uuid }
                    field_changed: { type: string }
                    old_value: { type: string, nullable: true }
                    new_value: { type: string, nullable: true }
                    changed_by: { type: string, nullable: true }
                    changed_at: { type: string, format: date-time }

  # ── Token Usage ──
  /agents/{id}/tokens:
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string }
    post:
      summary: Log token consumption
      tags: [Tokens]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [model, tokens_in, tokens_out]
              properties:
                task_id: { type: string, format: uuid }
                model: { type: string }
                tokens_in: { type: integer }
                tokens_out: { type: integer }
                cost_usd: { type: number }
      responses:
        '201':
          content:
            application/json:
              schema: { $ref: '#/components/schemas/TokenUsage' }

    get:
      summary: Get token usage breakdown
      tags: [Tokens]
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items: { $ref: '#/components/schemas/TokenUsage' }

  # ── Agent Intelligence ──
  /agents/{id}/intelligence:
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string }
    get:
      summary: Full agent intelligence profile
      tags: [Agents]
      responses:
        '200':
          content:
            application/json:
              schema: { $ref: '#/components/schemas/AgentIntelligence' }

  # ── Jobs ──
  /jobs/submit:
    post:
      summary: Submit a new GPU job
      tags: [Jobs]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [renter_id, gpu_type, job_code_url]
              properties:
                renter_id: { type: string, format: uuid }
                gpu_type: { type: string }
                job_code_url: { type: string, format: uri }
                estimated_hours: { type: number }
                max_budget: { type: number }
      responses:
        '201':
          content:
            application/json:
              schema: { $ref: '#/components/schemas/Job' }

  /jobs/{id}/match:
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string, format: uuid }
    post:
      summary: Manual GPU assignment for job
      tags: [Jobs]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [provider_id, gpu_id]
              properties:
                provider_id: { type: string, format: uuid }
                gpu_id: { type: string, format: uuid }
      responses:
        '200':
          content:
            application/json:
              schema: { $ref: '#/components/schemas/Job' }

  /jobs/{id}/status:
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string, format: uuid }
    get:
      summary: Get real-time job status
      tags: [Jobs]
      responses:
        '200':
          content:
            application/json:
              schema: { $ref: '#/components/schemas/Job' }

  /jobs/{id}/execute:
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string, format: uuid }
    post:
      summary: Start job execution
      tags: [Jobs]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [provider_id, gpu_id, docker_image, entrypoint]
              properties:
                provider_id: { type: string, format: uuid }
                gpu_id: { type: string, format: uuid }
                docker_image: { type: string }
                entrypoint: { type: string }
      responses:
        '200':
          content:
            application/json:
              schema: { $ref: '#/components/schemas/Job' }

  # ── GPU Health ──
  /gpu/{id}/healthcheck:
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string, format: uuid }
    post:
      summary: Submit GPU health probe result
      tags: [GPU]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                status: { $ref: '#/components/schemas/GpuHealthStatus' }
                temperature: { type: number }
                utilization: { type: number }
                memory_used_mb: { type: integer }
                memory_total_mb: { type: integer }
                power_watts: { type: number }
      responses:
        '201':
          content:
            application/json:
              schema: { $ref: '#/components/schemas/GpuHealth' }

  /gpu/{id}/connection-history:
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string, format: uuid }
    get:
      summary: Get 7-day connection history
      tags: [GPU]
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items: { $ref: '#/components/schemas/ConnectionHistoryEntry' }

  /gpu/{id}/failover-test:
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string, format: uuid }
    post:
      summary: Test failover to backup GPU
      tags: [GPU]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                backup_gpu_id: { type: string, format: uuid }
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  success: { type: boolean }
                  failover_time_ms: { type: integer }
                  backup_gpu_id: { type: string, format: uuid }
                  message: { type: string }

  /gpu/{id}/interrupt-recovery:
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string, format: uuid }
    post:
      summary: Handle GPU interruption recovery
      tags: [GPU]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                job_id: { type: string, format: uuid }
                checkpoint_id: { type: string }
                recovery_strategy: { type: string, enum: [retry, failover, abort] }
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  success: { type: boolean }
                  recovered_job_id: { type: string, format: uuid }
                  new_gpu_id: { type: string, format: uuid, nullable: true }
                  message: { type: string }

  # ── Connections ──
  /connections:
    get:
      summary: Real-time status of all services, agents, hardware
      tags: [Connections]
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items: { $ref: '#/components/schemas/Connection' }

  /connections/{id}/test:
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string, format: uuid }
    post:
      summary: Manual connection test
      tags: [Connections]
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  connection_id: { type: string, format: uuid }
                  status: { $ref: '#/components/schemas/ConnectionStatus' }
                  latency_ms: { type: number }
                  tested_at: { type: string, format: date-time }

  # ── Security ──
  /security/audit:
    post:
      summary: Log security event
      tags: [Security]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [event_type, resource, action]
              properties:
                event_type: { $ref: '#/components/schemas/SecurityEventType' }
                agent_id: { type: string, format: uuid }
                resource: { type: string }
                action: { type: string }
                details: { type: object }
                ip_address: { type: string }
                severity: { type: string, enum: [low, medium, high, critical] }
      responses:
        '201':
          content:
            application/json:
              schema: { $ref: '#/components/schemas/SecurityAudit' }

    get:
      summary: Get security audit trail
      tags: [Security]
      parameters:
        - name: event_type
          in: query
          schema: { $ref: '#/components/schemas/SecurityEventType' }
        - name: severity
          in: query
          schema: { type: string, enum: [low, medium, high, critical] }
        - name: limit
          in: query
          schema: { type: integer, default: 100 }
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items: { $ref: '#/components/schemas/SecurityAudit' }

  /security/isolation-verify:
    post:
      summary: Verify job isolation
      tags: [Security]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [job_id]
              properties:
                job_id: { type: string, format: uuid }
      responses:
        '200':
          content:
            application/json:
              schema: { $ref: '#/components/schemas/IsolationResult' }

  /security/violations:
    get:
      summary: Get security violations log
      tags: [Security]
      parameters:
        - name: severity
          in: query
          schema: { type: string, enum: [low, medium, high, critical] }
        - name: resolved
          in: query
          schema: { type: boolean }
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items: { $ref: '#/components/schemas/SecurityViolation' }

  # ── Providers ──
  /providers:
    get:
      summary: List available providers
      tags: [Providers]
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items: { $ref: '#/components/schemas/Provider' }

  /providers/{id}/gpus:
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string, format: uuid }
    get:
      summary: Get provider GPU inventory
      tags: [Providers]
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items: { $ref: '#/components/schemas/Gpu' }

  # ── Milestones ──
  /milestones:
    get:
      summary: List milestones
      tags: [Milestones]
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items: { $ref: '#/components/schemas/Milestone' }

  # ── Dashboard ──
  /dashboard:
    get:
      summary: Aggregated dashboard stats
      tags: [Dashboard]
      responses:
        '200':
          content:
            application/json:
              schema: { $ref: '#/components/schemas/DashboardStats' }
